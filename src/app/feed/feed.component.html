<ion-grid>
    <ion-row>
        <ion-col size-md="8" offset-md="2">
            <app-historias></app-historias>
        </ion-col>
    </ion-row>
</ion-grid>

<ion-grid>
    <ion-row *ngFor="let publicacion of Publicaciones; let id = index">
        <ion-col size-md="8" offset-md="2">
            <ion-card>
                <ion-card-header>
                    <ion-grid>
                        <ion-row>
                            <ion-col size="7">
                                <div class="usuario-card-header">
                                    <ion-avatar>
                                        <ion-img src="https://www.gub.uy/fiscalia-general-nacion/sites/fiscalia-general-nacion/files/catalogo/Sin-Perfil-Hombre.png" alt="" width="50px"></ion-img>
                                    </ion-avatar>
                                    <ion-label class="label">{{publicacion.usuario}}</ion-label>
                                </div>
                            </ion-col>
                            <ion-col size="2">
                                <ion-button (click)="editando = !editando">
                                    Editar
                                </ion-button>
                            </ion-col>
                            <ion-col size="2">
                                <ion-button (click)="borrarPost(id)">
                                    Borrar
                                </ion-button>
                            </ion-col>
                            <ion-col size="1">
                                <ion-button fill="translucent" id="trigger-popup--{{publicacion.id}}" class="trigger">
                                    <ion-icon name="ellipsis-horizontal-outline"></ion-icon>
                                </ion-button>
                                <ion-popover trigger="trigger-popup--{{publicacion.id}}">
                                    <ng-template>
                                        <app-popover></app-popover>
                                    </ng-template>
                                </ion-popover>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <div *ngIf="editando" style="margin-top: 15px;">
                                <ion-label><strong>Editar Post</strong></ion-label>
                                <ion-input placeholder="Caption" [(ngModel)]="publicacion.caption"><i>New caption: </i></ion-input>
                                <ion-button (click)="guardarCambios(id, publicacion)">Guardar</ion-button>
                                <ion-button (click)="editando = false">Cancelar</ion-button>
                            </div>
                        </ion-row>
                    </ion-grid>
                </ion-card-header>

                <ion-card-content>
                    <img [src]="publicacion.src" alt="" width = 100% [routerLink]="['/postFeed', publicacion.id]">
                    
                    <div class="opciones">
                        <ion-col size="1">
                            <ion-icon name="heart-outline"></ion-icon>
                        </ion-col>
                        <ion-col size="1">
                            <ion-icon name="chatbubble-outline"></ion-icon>
                        </ion-col>
                        <ion-col size="1">
                            <ion-icon name="paper-plane-outline"></ion-icon>
                        </ion-col>
                        <ion-col size="1" offset="8">
                            <ion-icon name="bookmark-outline"></ion-icon>
                        </ion-col>
                    </div>

                    <p id="caption-publicacion">{{publicacion.caption}}</p>

                </ion-card-content>

            </ion-card>
        </ion-col>
    </ion-row>
</ion-grid>